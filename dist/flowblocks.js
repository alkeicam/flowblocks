!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("joint")):"function"==typeof define&&define.amd?define(["joint"],e):"object"==typeof exports?exports.flowblocks=e(require("joint")):t.flowblocks=e(t.joint)}(this,(function(t){return function(t){var e={};function o(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=t,o.c=e,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(i,n,function(e){return t[e]}.bind(null,n));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=1)}([function(e,o){e.exports=t},function(t,e,o){o(0);const i=o(2);t.exports=new class{constructor(t){this.options={},Object.assign(this.options,t)}tryMe(){console.log("TryMe!"),this.addElement()}addElement(t,e,o){return i.create()}}({})},function(t,e,o){const i=o(0);t.exports=new class{constructor(t){this.options={},this.Model={},this.View={},Object.assign(this.options,t),this._initialize()}_initialize(){i.shapes.flowblocks={},this.Model=i.shapes.devs.Model.define("flowblocks.Block",{name:"",icon:"https://mdn.mozillademos.org/files/6457/mdn_logo_only_color.png",status:"OK",statusMsg:"OK",attrs:{rect:{width:200,fill:"rgb(211, 55, 255)"},body:{fill:"#ffffff",stroke:"#000000"},link:{refWidth:"100%",refHeight:"100%",xlinkShow:"new",cursor:"pointer"},".status-err":{refHeight:"25%",fill:"rgb(204, 41, 0)",refY:"75%"},".fb-icon-rect":{fill:"rgb(100, 55, 255)"},".fb-icon-image":{ref:".fb-icon-rect"},".fb-status-rect":{fill:"rgb(57, 230, 0)"},".fb-status-text":{ref:".fb-status-rect","ref-x":1,"ref-y":1,"font-size":"0.5rem","text-anchor":"start",fill:"black","y-alignment":"middle"},".fb-label-rect":{fill:"rgb(57, 230, 0)"},".fb-label-text":{ref:".fb-label-rect","ref-x":1,"ref-y":1,"font-size":"0.75rem","text-anchor":"start",fill:"black","y-alignment":"middle"}}},{markup:['<g class="rotatable">','<rect class="body"/>','<rect class="fb-icon-rect"/>','<image class="fb-icon-image" href="https://mdn.mozillademos.org/files/6457/mdn_logo_only_color.png" />','<rect class="fb-label-rect"/>','<text class="fb-label-text">Element 1</text>','<rect class="fb-status-rect"/>','<text class="fb-status-text">Element 2</text>',"</g>"].join(""),initialize:function(){this.on("change:name change:icon change:status change:statusMsg",(function(){this.updateMyModel(),this.trigger("flowblock-update")}),this),this.updateMyModel(),i.shapes.devs.Model.prototype.initialize.apply(this,arguments)},updateMyModel:function(){var t=this.get("attrs"),e=[{width:t.rect.width,icon:this.get("icon"),name:this.get("name"),statusMessage:this.get("statusMsg")}],o=0;e.forEach((function(e){var i=40;t[".fb-label-rect"].height=i,t[".fb-label-rect"].transform="translate(0,"+o+")",t[".fb-label-text"].text=e.name,o+=i,t[".fb-icon-rect"].height=i,t[".fb-icon-rect"].transform="translate(0,"+o+")",t[".fb-icon-image"].height=20,t[".fb-icon-image"].transform="translate("+e.width/4+","+o+")",t[".fb-icon-image"].href=e.icon,o+=i=40,t[".fb-status-rect"].height=40,t[".fb-status-rect"].transform="translate(0,"+o+")",t[".fb-status-text"].text=e.statusMessage}))}},{}),i.shapes.flowblocks.BlockView=i.dia.ElementView.extend({initialize:function(){ElementView.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"flowblocks-block-update",(function(){this.update(),this.resize()}))}}),this.View=i.shapes.flowblocks.BlockView}create(){return new this.Model({position:{x:50,y:50},size:{width:90,height:90},inPorts:["in1","in2"],outPorts:["out"],ports:{groups:{in:{attrs:{".port-body":{fill:"#16A085",magnet:"passive"}}},out:{attrs:{".port-body":{fill:"#E74C3C"}}}}},attrs:{".label":{text:"Model","ref-x":.5,"ref-y":.2},rect:{fill:"#2ECC71"}}})}}({})}])}));